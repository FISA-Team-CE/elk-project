# 우리카드 데이터를 활용한 ELK 프로젝트

> 진행 기간 : 2026.01.15

<br/>

## 👩🏻‍💻 팀원 소개

| <img src="https://avatars.githubusercontent.com/u/121941036?v=4" width="150" height="150"/> | <img src="https://avatars.githubusercontent.com/u/118096607?v=4" width="150" height="150"/> | <img src="https://avatars.githubusercontent.com/u/80169727?v=4" width="150" height="150"/> | 
| :-----------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------: |  
|                 류승환<br/>[@Federico-15](https://github.com/Federico-15)                 |                       서가영<br/>[@caminobelllo](https://github.com/caminobelllo)                       |                유동균<br/>[@dbehdrbs0806](https://github.com/dbehdrbs0806)                |   


<br />

<br/>


## 선정 주제
### 🎯 주제
라이프스테이지 기반의 소비 패턴 분석을 통해 잠정 고객 활성화 전략 고안

### 💡 주제 선정 이유
- 소비의 주축이 되는 4060 세대를 라이프스테이지별로 분류해 실제 결제 패턴을 기반으로 타겟 고객 클러스터를 구성
- 데이터를 통해 지출 분야의 변화가 생기는 시점을 파악해 이에 맞는 타겟팅 전략을 수립해 잠재 고객을 충성 고객으로 전환시키는 인사이트를 도출하고자 함

<br />

<hr/>


## DuckDB를 통한 데이터 전처리
우리카드의 대용량 데이터 (약 900만 건)를 효율적으로 처리하기 위해 DuckDB를 활용하였으며, 효율적인 분석을 위해 다음과 같은 전처리 과정을 거침

### ⚒️ 주요 전처리 과정
> `COPY`를 통한 데이터 분할

> 실제 컬럼명은 표기하지 않음
```sql
-- 라이프스테이지별 잠정 고객 분류
COPY (
    SELECT
    ...
        (
        	COALESCE(대분류컬럼명, 0) + 
        	COALESCE(대분류컬럼명, 0) + 
        	...
        	COALESCE(대분류컬럼명, 0)
        ) AS 대분류_금액합계,

        CASE 
            WHEN (
              COALESCE(대분류컬럼명, 0) + 
        	    COALESCE(대분류컬럼명, 0) + 
        	    ...
        	    COALESCE(대분류컬럼명, 0)
            ) < 150 THEN 'Low_잠정고객'
            WHEN (
              COALESCE(대분류컬럼명, 0) + 
        	    COALESCE(대분류컬럼명, 0) + 
        	    ...
        	    COALESCE(대분류컬럼명, 0)
            ) < 300 THEN 'Mid_일반고객'
            ELSE 'High_충성고객'
        END AS usage_segment,
    ...
```

```sql
-- 시니어
COPY (
    SELECT
        
		..
        CASE 
    	
    	-- 학원비 + 식비
    		WHEN TRY_CAST(연령대컬럼명 AS INTEGER) BETWEEN 40 AND 55
         		AND COALESCE(TRY_CAST(대분류컬럼명 AS BIGINT), 0) > 0 
         		AND COALESCE(TRY_CAST(대분류컬럼명 AS BIGINT), 0) > 10 
    		THEN '학원비+식비 클러스터'  

    		-- 학원비만 
    		WHEN TRY_CAST(연령대컬럼명 AS INTEGER) BETWEEN 40 AND 65 
         		AND COALESCE(TRY_CAST(대분류컬럼명 AS BIGINT), 0) > 0 
    		THEN '학원 클러스터'     
    		
    		WHEN TRY_CAST(연령대컬럼명 AS INTEGER) >= 55 
         		AND ( 
             		COALESCE(TRY_CAST(대분류컬럼명 AS BIGINT), 0) > 0  
             			OR 
             		COALESCE(TRY_CAST(대분류컬럼명 AS BIGINT), 0) > 5 
         		)
    		THEN '시니어 클러스터'
    		ELSE '기타'	
		END AS 타겟_클러스터,

        -- 분석용 상세 금액 
        COALESCE(TRY_CAST(중분류컬럼명 AS BIGINT), 0) AS 학원비_상세,
        COALESCE(TRY_CAST(중분류컬럼명 AS BIGINT), 0) AS 병원비_상세,

        COALESCE(TRY_CAST(대분류컬럼명 AS BIGINT), 0) AS 교육_전체,   -- 교육 전체
        COALESCE(TRY_CAST(대분류컬럼명 AS BIGINT), 0) AS 의료_전체,   -- 의료 전체

        -- 총 이용금액
        (
            COALESCE(대분류컬럼명, 0) + 
            COALESCE(대분류컬럼명, 0) + 
            ...
            COALESCE(대분류컬럼명, 0)
        ) AS 총_이용금액

    ...
```
#### 1. 결측치(NULL) 및 타입 핸들링
  - `COALESCE`와 `TRY_CAST` 함수를 사용하여 NULL 값을 0으로 치환
  - 문자열로 기재된 수치 데이터를 변환하여 연산 오류를 방지
#### 2. 고객 세그멘테이션
  - 단순 이용 금액 합계가 아닌 대분류와 중분류를 활용한 소비 패턴에 따라 고객들을 클러스터링 

<br />

<hr/>


## Kibana를 이용한 데이터 시각화
전처리된 데이터를 Elasticsearch에 적재하고, Kibana Dashboard를 통해 지표들을 시각화함

### 📊 대시보드 구성
#### 1. 라이프스테이지별 잠정 고객 비율 (Stacked Bar Chart)
  - 전체 고객들을 라이프스테이지에 따라 구분
  - 총 이용 금액 150만원 미만을 **Low (잠정 고객)** 으로 정의하여 해당 비율이 가장 높은 그룹을 타켓 페르소나로 선정
<img width="1874" height="548" alt="image" src="https://github.com/user-attachments/assets/83b98d67-220f-4af9-97c9-52a19c6f87cf" />

  
  - 사람수로 정렬했을 때 상위 두 라이프스테이지 '중년기타' 중 잠정 고객의 비율은 약 38.4%, '2nd life' 중 잠정 고객 비율은 46.8%
      - 따라서 중장년층 타겟 페르소나로 선정하여 해당 페르소나의 잠정 고객 그룹에 대한 분석을 진행

<br/>

#### 2. 교육 카테고리 심층 분석 (Unstacked Bar Chart)
  - 연령대는 타겟 페르소나에 맞춰 40-65(40세-69세)로 필터링
  - 대분류인 '사무/서적/학원' 비용 중 실질적인 '학원비(중분류)'의 비중을 분석
<img width="1868" height="517" alt="image" src="https://github.com/user-attachments/assets/15f65ded-c226-4701-854d-56a952b4df3d" />
  
  - 발견점 : '사무통신/서적/학원' 대분류의 약 90%가 학원비임을 규명해 타겟팅의 정당성 확보

<br/>

#### 3. 4060 세대별 지출 변화 추이 (Stacked Bar Chart)
  - 연령대별(x축) 총 이용 금액(y축)을 타겟 페르소나별로 다른 색상을 사용해 시각화
<img width="1876" height="455" alt="image" src="https://github.com/user-attachments/assets/e05db724-9417-4961-9893-5d2e7a267aaa" />

  - 발견점 : 연령대 55(55-59세)를 기점으로 '교육비 지출'이 급감하고, '병원비' 지출이 급증하는 cross-over point를 발견
  - 따라서 전체적인 타겟 페르소나에게 교육비 & 병원비에 관한 혜택을 통해 잠정 고객 유치에 적용할 수 있을 것이라 판단

<hr/>

### 💸 마케팅 인사이트 및 전략 도출
시각화 데이터를 통해 잠정 고객 유치를 위한 실행 전략을 도출

#### 1. 4050을 위한 학원비 할인 전략
- 인사이트 : 데이터 분석 결과, 4050 그룹의 '사무통신/서적/학원' 분류에 대한 지출 대부분은 '학원'에 집중되어 있음
- 전략 : 해당 연령대에서 실효성이 낮은 서적 할인을 없애고, '학원비 집중 할인' 혜택을 제공해 자녀를 둔 부모들의 메인 카드 이용을 유도
- 기대 효과 :
  1. 고정비 자동 결제 : 매달 고정적으로 지출되는 학원비를 결제
  2. 마케팅 비욜 효율화 : 해당 대분류에서 이용률이 낮은 서적 및 사무통신에 대한 예산을 삭감하고, 핵심적인 지출인 학원비에 집중하여 비용 대비 효용을 극대화

#### 2. 55+를 위한 시니어 전략
- 인사이트 : 55 (55세~59세) 구간에서 '보험 및 병원'에 대한 지출 비율이 크게 증가하는 것을 확인
- 전략 : 종합 검진 우대, 병원비 청구 할인 등의 헤택이 담인 헬스케어 특화 카드로 교체 발급을 유도
- 기대 효과 :
  1. 고객 이탈 방지 : 기존에 교육비 등의 지출에 카드를 이용했던 경우, 자녀 교육비 지출 종료와 함께 카드를 해지하는 경우가 있을 수 있음. 하지만 고객에게 새로운 사용 명분을 제공하여 타 카드사로의 이탈을 방지
  2. 장기 고객군 확보 : 청년층에 비해 구매력이 높은 시니어층을 확보하여 고령화 시대에 맞는 장기 우량 고객군 확보 가능
  3. 고객 단가 유지 : 비교적으로 결제 단위가 큰 병원비나 종합 검진비 결제를 유치 가능
